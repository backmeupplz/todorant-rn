fastlane_version "2.28.3"
default_platform :ios

platform :ios do
  before_all do
    cocoapods
  end

  lane :commit_and_push_ios_release do
    git_add
    git_commit(
      message: "ios release"
    )
    push_to_git_remote
  end

  lane :release do
    increment_version_number
    increment_build_number
    build_app(
      scheme: "Todorant",
      silent: true
    )
    upload_to_app_store(
      submit_for_review: true
    )
    commit_and_push_ios_release
  end
end